<div id="acm_shadow_popup">
    <div id="acm_popup">
        <div id="acm_popup_holder">
            <div id="acm_popup_text">
                <div class="list-character-wrapper flexFlowColumn">
                    <div class="sortAndFilter">
                        <form class="form_sort_filter" action="javascript:voidnull;">
                            <div id="acm_tags_view" class="menu_button tags_view fa-solid fa-tags" title="View all tags" data-i18n="[title]View all tags"></div>
                            <div id="acm_character_import_button" class="menu_button fa-solid fa-file-import faSmallFontSquareFix" title="Import Character from File" data-i18n="[title]Import Character from File"></div>
                            <div id="acm_external_import_button" class="menu_button fa-solid fa-cloud-arrow-down faSmallFontSquareFix" title="Import content from external URL" data-i18n="[title]Import content from external URL"></div>
                            <div class="sortText">Sorted by :</div>
                            <select id="char_sort_order" title="Characters sorting order" data-i18n="[title]Characters sorting order">
                                <option data-field="name" data-order="asc" data-i18n="A-Z">A-Z</option>
                                <option data-field="name" data-order="desc" data-i18n="Z-A">Z-A</option>
                                <option data-field="tags" data-order="asc">Least Tags</option>
                                <option data-field="tags" data-order="desc">Most Tags</option>
                                <option data-field="date_last_chat" data-order="asc">Recent</option>
                                <option data-field="date_added" data-order="asc">Newest</option>
                                <option data-field="date_added" data-order="desc">Oldest</option>
                            </select>
                            <input id="char_search_bar" class="text_pole width100p" type="search" data-i18n="[placeholder]Search..." placeholder="Search..." maxlength="100">
                            <label class="acm_checkbox">
                                <span>Only Favs</span>
                                <input id="favOnly_checkbox" type="checkbox">
                            </label>
                        </form>
                        <span id="charNumber"></span>
                    </div>
                    <div id="character-list">
                    </div>
                    <hr id="char-sep" style="display:none">
                    <div id="char-details" style="display:none">
                        <div id="char-details-block">
                            <div class="char-details-summary">
                                <div id="avatar_title">
                                    <img id="avatar_img" class="char-details-img" src="">
                                </div>
                                <div class="char-details-summary-desc">
                                    <div id="ch_name_details"></div>
                                    <div id="crea_comment"></div>
                                </div>
                            </div>
                            <div id="acm_details_buttons_block">
                                <div id="acm_favorite_button" class="menu_button fa-solid fa-star interactable fav_off" title="Add to Favorites" data-i18n="[title]Add to Favorites" tabindex="0"></div>
                                <div id="acm_open_chat" class="menu_button fa-solid fa-comments" title="Open chat" data-i18n="[title]Open chat" style="display: flex;"></div>
                                <div id="acm_rename_button" class="menu_button fa-solid fa-user-pen" title="Rename Character" data-i18n="[title]Rename" style="display: flex;"></div>
                                <div id="acm_advanced_div" class="menu_button fa-solid fa-book" title="Advanced Definitions" data-i18n="[title]Advanced Definition"></div>
                                <div id="acm_export_button" class="menu_button fa-solid fa-file-export" title="Export and Download" data-i18n="[title]Export and Download" style="display: flex;"></div>
                                <div id="acm_dupe_button" class="menu_button fa-solid fa-clone" title="Duplicate Character" data-i18n="[title]Duplicate Character" style="display: flex;"></div>
                                <div id="acm_delete_button" class="menu_button fa-solid fa-skull" title="Delete Character" data-i18n="[title]Delete Character" style="display: flex;"></div>
                            </div>
                            <div class="char-details-tags">
                                <div class="tag-searchbar">
                                    <input id="input_tag" class="text_pole tag_input wide100p margin0 ui-autocomplete-input" data-i18n="[placeholder]Search / Create Tags" placeholder="Search / Create tags" maxlength="50" autocomplete="off">
                                </div>
                                <div id="tag_List" class="tags"></div>
                            </div>
                        </div>
                        <div id="char-details-desc">
                            <div class="desc_container">
                                <div class="inline-drawer">
                                    <div id="desc_header" class="inline-drawer-toggle inline-drawer-header inline-drawer-design">
                                        <b>Description</b>
                                        <span id="desc_Tokens"></span>
                                        <div class="inline-drawer-icon idit fa-solid fa-circle-chevron-down down"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <textarea id="desc_zone" class="autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div class="inline-drawer">
                                    <div id="firstMes_header" class="inline-drawer-toggle inline-drawer-header inline-drawer-design">
                                        <b>Greeting</b>
                                        <span id="firstMess_tokens"></span>
                                        <div class="inline-drawer-icon idit fa-solid fa-circle-chevron-down down"></div>
                                    </div>
                                    <div class="inline-drawer-content">
                                        <textarea id="firstMes_zone" class="autoSetHeight"></textarea>
                                    </div>
                                </div>
                                <div id="altGreetings_drawer" class="inline-drawer">
                                    <div id="altGreetings_header" class="altgreetings-drawer-toggle inline-drawer-header inline-drawer-design">
                                        <b>Alt. Greetings</b>
                                        <span id="altGreetings_number"></span>
                                        <div class="altGreetings_buttons">
                                            <i class="inline-drawer-icon fa-solid fa-circle-plus"></i>
                                            <i class="inline-drawer-icon idit fa-solid fa-circle-chevron-down down"></i>
                                        </div>
                                    </div>
                                    <div id="altGreetings_content" class="inline-drawer-content">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div id="acm_popup_controls">
                <div id="acm_popup_close" class="menu_button">Close</div>
            </div>
        </div>
    </div>
</div>
<div id="acm_export_format_popup" class="list-group" style="position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(-1920px);" data-popper-reference-hidden="" data-popper-escaped="" data-popper-placement="left">
    <div class="acm_export_format list-group-item" data-format="png">PNG</div>
    <div class="acm_export_format list-group-item" data-format="json">JSON</div>
</div>
<div id="acm_character_popup" class="flex-container flexFlowColumn flexNoGap">
    <div id="acm_character_popup_text">
        <h3 id="acm_character_popup-button-h3" class="margin0"></h3>
        <span data-i18n="Advanced Defininitions">- Advanced Definitions</span>
    </div>
    <hr class="margin-bot-10px">
    <div id="acm_character_cross" class="fa-solid fa-circle-xmark"></div>
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <h4>
                <span data-i18n="Prompt Overrides">Prompt Overrides</span>
                <small data-i18n="(For Chat Completion and Instruct Mode)">(For Chat Completion and Instruct Mode)</small>
            </h4>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <small data-i18n="Insert {{original}} into either box to include the respective default prompt from system settings.">Insert {{original}} into either box to include the respective default prompt from system settings.</small>
            <div>
                <h4 data-i18n="Main Prompt">Main Prompt</h4>
                <textarea id="acm_system_prompt_textarea" name="system_prompt" data-i18n="[placeholder]Any contents here will replace the default Main Prompt used for this character. (v2 spec: system_prompt)" placeholder="Any contents here will replace the default Main Prompt used for this character.
(v2 spec: system_prompt)" class="text_pole" autocomplete="off" rows="3" maxlength="50000"></textarea>
                <div class="extension_token_counter">
                    <span id="acm_main_prompt_tokens"></span>
                </div>
            </div>
            <div>
                <h4 data-i18n="Post-History Instructions">Post-History Instructions</h4>
                <textarea id="acm_post_history_instructions_textarea" name="post_history_instructions" data-i18n="[placeholder]Any contents here will replace the default Post-History Instructions used for this character. (v2 spec: post_history_instructions)" placeholder="Any contents here will replace the default Post-History Instructions used for this character.
(v2 spec: post_history_instructions)" class="text_pole" autocomplete="off" rows="3" maxlength="50000"></textarea>
                <div class="extension_token_counter">
                    <span id="acm_post_tokens"></span>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <h4 data-i18n="Creator's Metadata (Not sent with the AI prompt)">
                <span data-i18n="Creator's Metadata">Creator's Metadata</span>
                <small data-i18n="(Not sent with the AI Prompt)">(Not sent with the AI Prompt)</small>
            </h4>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down interactable" tabindex="0"></div>
        </div>
        <div class="inline-drawer-content">
            <small data-i18n="Everything here is optional">Everything here is optional</small>
            <div class="flex-container flexnowrap">
                <div class="flex1">
                    <h4 data-i18n="Created by">Created by</h4>
                    <textarea id="acm_creator_textarea" name="creator" data-i18n="[placeholder](Botmaker's name / Contact Info)" placeholder="(Botmaker's name / Contact info)" class="text_pole" autocomplete="off" rows="2" maxlength="5000"></textarea>
                </div>
                <div class="flex1">
                    <h4 data-i18n="Character Version">Character Version</h4>
                    <textarea id="acm_character_version_textarea" name="character_version" data-i18n="[placeholder](If you want to track character versions)" placeholder="(If you want to track character versions)" class="text_pole" autocomplete="off" rows="2" maxlength="500"></textarea>
                </div>
            </div>
            <div class="flex-container flexnowrap">
                <div class="flex1">
                    <h4 class="flex-box" data-i18n="Creator's Notes">Creator's Notes<i class="editor_maximize fa-solid fa-maximize" data-for="acm_creator_notes_textarea" title="Expand the editor" data-i18n="[title]Expand the editor"></i></h4>
                    <textarea id="acm_creator_notes_textarea" name="creator_notes" data-i18n="[placeholder](Describe the bot, give use tips, or list the chat models it has been tested on. This will be displayed in the character list.)" placeholder="(Describe the bot, give use tips, or list the chat models it has been tested on. This will be displayed in the character list.)" class="text_pole" autocomplete="off" rows="4" maxlength="20000"></textarea>
                </div>
                <div class="flex1">
                    <h4 data-i18n="Tags to Embed">Tags to Embed</h4>
                    <textarea id="acm_tags_textarea" name="tags" data-i18n="[placeholder](Write a comma-separated list of tags)" placeholder="(Write a comma-separated list of tags)" class="text_pole" autocomplete="off" rows="4" maxlength="5000"></textarea>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div id="acm_personality_div">
        <h4>
            <span data-i18n="Personality summary">Personality summary</span>
            <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#personality-summary" class="notes-link" target="_blank"><span class="fa-solid fa-circle-question note-link-span"></span></a>
        </h4>
        <textarea id="acm_personality_textarea" name="personality" data-i18n="[placeholder](A brief description of the personality)" placeholder="(A brief description of the personality)" class="text_pole" autocomplete="off" rows="4" maxlength="50000"></textarea>
        <div class="extension_token_counter">
            <span id="acm_personality_tokens"></span>
        </div>
    </div>
    <div id="acm_scenario_div">
        <h4>
            <span data-i18n="Scenario">Scenario</span>
            <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#scenario" class="notes-link" target="_blank">
                <span class="fa-solid fa-circle-question note-link-span"></span>
            </a>
        </h4>
        <textarea id="acm_scenario_pole" name="scenario" data-i18n="[placeholder](Circumstances and context of the interaction)" placeholder="(Circumstances and context of the interaction)" class="text_pole" maxlength="50000" value="" autocomplete="off" rows="4"></textarea>
        <div class="extension_token_counter">
            <span id="acm_scenario_tokens"></span>
        </div>
    </div>
    <div id="acm_depth_prompt_div" class="flex-container">
        <div class="flex1">
            <h4>
                    <span data-i18n="Character's Note">
                        Character's Note
                    </span>
            </h4>
            <textarea id="acm_depth_prompt_prompt" name="depth_prompt_prompt" class="text_pole" rows="5" maxlength="50000" autocomplete="off" data-i18n="[placeholder](Text to be inserted in-chat @ designated depth and role)" placeholder="(Text to be inserted in-chat @ designated depth and role)"></textarea>
        </div>
        <div>
            <h4>
                    <span data-i18n="@ Depth">
                        @ Depth
                    </span>
            </h4>
            <input id="acm_depth_prompt_depth" name="depth_prompt_depth" class="text_pole textarea_compact m-t-0" type="number" min="0" max="999" value="4">
            <h4>
                    <span data-i18n="Role">
                        Role
                    </span>
            </h4>
            <select id="acm_depth_prompt_role" name="depth_prompt_role" class="text_pole textarea_compact m-t-0">
                <option value="system" data-i18n="System">System</option>
                <option value="user" data-i18n="User">User</option>
                <option value="assistant" data-i18n="Assistant">Assistant</option>
            </select>
            <div class="extension_token_counter">
                <span id="acm_char_notes_tokens"></span>
            </div>
        </div>
    </div>
    <div id="acm_talkativeness_div">
        <h4><span data-i18n="Talkativeness">Talkativeness</span></h4>
        <h5 data-i18n="How often the character speaks in group chats!"><!-- This data-i18n attribute on the left is kept for backward compatibility, use the ones below when translating -->
            <span data-i18n="How often the character speaks in">How often the character speaks in</span>&nbsp;<span class="warning" data-i18n="group chats!">group chats!</span>
        </h5>
        <input id="acm_talkativeness_slider" name="talkativeness" type="range" min="0" max="1" step="0.05" value="0.5">
        <div class="slider_hint">
            <span data-i18n="Shy">Shy</span>
            <span data-i18n="Normal">Normal</span>
            <span data-i18n="Chatty">Chatty</span>
        </div>
    </div>
    <hr>
    <div id="acm_mes_example_div" class="flex-container flexFlowColumn">
        <div>
            <h4><span data-i18n="Examples of dialogue">Examples of dialogue</span></h4>
            <h5 data-i18n="Important to set the character's writing style.">Important to set the character's writing style. <a href="https://docs.sillytavern.app/usage/core-concepts/characterdesign/#examples-of-dialogue" class="notes-link" target="_blank"><span class="fa-solid fa-circle-question note-link-span"></span></a></h5>
        </div>
        <textarea id="acm_mes_example_textarea" class="flexGrow" name="mes_example" data-i18n="[placeholder](Examples of chat dialog. Begin each example with START on a new line.)" placeholder="(Examples of chat dialog. Begin each example with <START> on a new line.)" maxlength="50000" rows="6"></textarea>
        <div class="extension_token_counter">
            <span id="acm_messages_examples"></span>
        </div>
    </div>
    <div id="acm_character_popup_ok" class="menu_button interactable" data-i18n="Save">Save</div>
</div>
